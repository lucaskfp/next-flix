import HomeLists from "components/HomeLists";
import fetcher from "constants/fetcher";
import tmdbConfigs from "constants/tmdbConfigs";
import Head from "next/head";

export default function Home({ movies, series, tmdnConfigs }) {
  return (
    <>
      <Head>
        <title>Next Flix</title>
        <meta name="description" content="Generated by create next app" />
      </Head>

      <header className="py-4 bg-white shadow lg:hidden">
        <h1 className="text-center font-bold text-xl">NEXT FLIX</h1>
      </header>

      <div className="py-10">
        <section className="mb-10 lg:mb-20">
          <h2 className="mb-4 text-xl lg:text-2xl font-bold <lg:px-4">
            Trending Filmes
          </h2>

          <HomeLists type="movie" tmdnConfigs={tmdnConfigs} data={movies} />
        </section>

        <section className="">
          <h2 className="mb-4 text-xl lg:text-2xl font-bold <lg:px-4">
            Trending SÃ©ries
          </h2>

          <HomeLists type="tv" tmdnConfigs={tmdnConfigs} data={series} />
        </section>
      </div>
    </>
  );
}

export async function getStaticProps() {
  const { results: movies } = await fetcher("trending/movie/day");

  const { results: series } = await fetcher("trending/tv/day");

  const tmdnConfigs = await tmdbConfigs();

  return {
    props: { movies, series, tmdnConfigs },
    revalidate: 14400,
  };
}
